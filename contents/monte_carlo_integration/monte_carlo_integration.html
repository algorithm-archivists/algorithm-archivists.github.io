
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Monte Carlo Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-bibtex-cite/style.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-api-language-selector/api-language-selector.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../matrix_methods/matrix_methods.html" />
    
    
    <link rel="prev" href="../euclidean_algorithm/euclidean_algorithm.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Algorithm Archive
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../introduction/introduction.html">
            
                <a href="../introduction/introduction.html">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../how_to_contribute/how_to_contribute.html">
            
                <a href="../how_to_contribute/how_to_contribute.html">
            
                    
                    How To Contribute
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../data_structures/data_structures.html">
            
                <a href="../data_structures/data_structures.html">
            
                    
                    Data Structures
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../stacks_and_queues/stacks_and_queues.html">
            
                <a href="../stacks_and_queues/stacks_and_queues.html">
            
                    
                    Stacks and Queues
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../mathematical_background/mathematical_background.html">
            
                <a href="../mathematical_background/mathematical_background.html">
            
                    
                    Mathematical Background
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../notation/notation.html">
            
                <a href="../notation/notation.html">
            
                    
                    Complexity Notation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../bitlogic/bitlogic.html">
            
                <a href="../bitlogic/bitlogic.html">
            
                    
                    Bit Logic
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../taylor_series_expansion/taylor_series_expansion.html">
            
                <a href="../taylor_series_expansion/taylor_series_expansion.html">
            
                    
                    Taylor Series
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../sorting_and_searching/sorting_and_searching.html">
            
                <a href="../sorting_and_searching/sorting_and_searching.html">
            
                    
                    Sorting and Searching
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../bubble_sort/bubble_sort.html">
            
                <a href="../bubble_sort/bubble_sort.html">
            
                    
                    Bubble Sort
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../bogo_sort/bogo_sort.html">
            
                <a href="../bogo_sort/bogo_sort.html">
            
                    
                    Bogo Sort
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../tree_traversal/tree_traversal.html">
            
                <a href="../tree_traversal/tree_traversal.html">
            
                    
                    Tree Traversal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../euclidean_algorithm/euclidean_algorithm.html">
            
                <a href="../euclidean_algorithm/euclidean_algorithm.html">
            
                    
                    Euclidean Algorithm
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.9" data-path="monte_carlo_integration.html">
            
                <a href="monte_carlo_integration.html">
            
                    
                    Monte Carlo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../matrix_methods/matrix_methods.html">
            
                <a href="../matrix_methods/matrix_methods.html">
            
                    
                    Matrix Methods
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../gaussian_elimination/gaussian_elimination.html">
            
                <a href="../gaussian_elimination/gaussian_elimination.html">
            
                    
                    Gaussian Elimination
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../thomas_algorithm/thomas_algorithm.html">
            
                <a href="../thomas_algorithm/thomas_algorithm.html">
            
                    
                    Thomas Algorithm
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../computational_geometry/computational_geometry.html">
            
                <a href="../computational_geometry/computational_geometry.html">
            
                    
                    Computational Geometry
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../gift_wrapping/gift_wrapping.html">
            
                <a href="../gift_wrapping/gift_wrapping.html">
            
                    
                    Gift Wrapping
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1.1" data-path="../jarvis_march/jarvis_march.html">
            
                <a href="../jarvis_march/jarvis_march.html">
            
                    
                    Jarvis March
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.1.2" data-path="../graham_scan/graham_scan.html">
            
                <a href="../graham_scan/graham_scan.html">
            
                    
                    Graham Scan
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../cooley_tukey/cooley_tukey.html">
            
                <a href="../cooley_tukey/cooley_tukey.html">
            
                    
                    FFT
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../decision_problems/decision_problems.html">
            
                <a href="../decision_problems/decision_problems.html">
            
                    
                    Decision Problems
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../stable_marriage_problem/stable_marriage_problem.html">
            
                <a href="../stable_marriage_problem/stable_marriage_problem.html">
            
                    
                    Stable Marriage Problem
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../differential_equations/differential_equations.html">
            
                <a href="../differential_equations/differential_equations.html">
            
                    
                    Differential Equation Solvers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="../forward_euler_method/forward_euler_method.html">
            
                <a href="../forward_euler_method/forward_euler_method.html">
            
                    
                    Forward Euler Method
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../physics_solvers/physics_solvers.html">
            
                <a href="../physics_solvers/physics_solvers.html">
            
                    
                    Physics Solvers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="../verlet_integration/verlet_integration.html">
            
                <a href="../verlet_integration/verlet_integration.html">
            
                    
                    Verlet Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="../quantum_systems/quantum_systems.html">
            
                <a href="../quantum_systems/quantum_systems.html">
            
                    
                    Quantum Systems
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.2.1" data-path="../split-operator_method/split-operator_method.html">
            
                <a href="../split-operator_method/split-operator_method.html">
            
                    
                    Split-Operator Method
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../data_compression/data_compression.html">
            
                <a href="../data_compression/data_compression.html">
            
                    
                    Data Compression
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="../huffman_encoding/huffman_encoding.html">
            
                <a href="../huffman_encoding/huffman_encoding.html">
            
                    
                    Huffman Encoding
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="../quantum_information/quantum_information.html">
            
                <a href="../quantum_information/quantum_information.html">
            
                    
                    Quantum Information
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Monte Carlo</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="monte-carlo-integration">Monte Carlo Integration</h1>
<p>Monte Carlo methods were some of the first methods I ever used for research, and when I learned about them, they seemed like some sort of magic.
Their premise is simple: random numbers can be used to integrate arbitrary shapes embedded into other objects.
Nowadays, &quot;Monte Carlo&quot; has become a bit of a catch-all term for methods that use random numbers to produce real results, but it all started as a straightforward method to integrate objects.
No matter how you slice it, the idea seems a bit crazy at first.
After all, random numbers are random.
How could they possibly be used to find non-random values?</p>
<p>Well, imagine you have a square.
The area of the square is simple, <script type="math/tex; ">\text{Area}_{\text{square}} = \text{length} \times \text{width}</script>.
Since it&apos;s a square, the <script type="math/tex; ">\text{length}</script> and <script type="math/tex; ">\text{width}</script> are the same, so the formula is technically just <script type="math/tex; ">\text{Area}_{\text{square}} = \text{length}^2</script>.
If we embed a circle into the square with a radius <script type="math/tex; ">r = \tfrac{length}{2}</script> (shown below), then its area is <script type="math/tex; ">\text{Area}_{\text{circle}}=\pi r^2</script>.
For simplicity, we can also say that <script type="math/tex; ">\text{Area}_{\text{square}}=4r^2</script>.</p>
<p>
    <img class="center" src="res/square_circle.png" width="300">
</p>

<p>Now, let&apos;s say we want to find the area of the circle without an equation.
As we said before, it&apos;s embedded in the square, so we should be able to find some ratio of the area of the square to the area of the circle:</p>
<p><script type="math/tex; mode=display">
\text{Ratio} = \frac{\text{Area}_{\text{circle}}}{\text{Area}_{\text{square}}}
</script></p>
<p>This means,</p>
<p><script type="math/tex; mode=display">
\text{Area}_{\text{circle}} = \text{Area}_{\text{square}}\times\text{Ratio} = 4r^2 \times \text{ratio}
</script></p>
<p>So, if we can find the <script type="math/tex; ">\text{Ratio}</script> and we know <script type="math/tex; ">r</script>, we should be able to easily find the <script type="math/tex; ">\text{Area}_{\text{circle}}</script>.
The question is, &quot;How do we easily find the <script type="math/tex; ">\text{Ratio}</script>?&quot;
Well, one way is with <em>random sampling</em>.
We basically just pick a bunch of points randomly in the square, and
each point is tested to see whether it&apos;s in the circle or not:</p>
<div class="code-method"><div class="code-method-definition"></div><div class="code-method-code"><div class="code-method-sample" data-lang="jl" data-name="Julia"><pre class="language-"><code class="lang-julia"><span class="token keyword">function</span> in_circle<span class="token punctuation">(</span>x_pos<span class="token punctuation">:</span><span class="token punctuation">:</span>Float64<span class="token punctuation">,</span> y_pos<span class="token punctuation">:</span><span class="token punctuation">:</span>Float64<span class="token punctuation">)</span>

    <span class="token comment"># Setting radius to 1 for unit circle</span>
    radius <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">return</span> x_pos<span class="token operator">^</span><span class="token number">2</span> <span class="token operator">+</span> y_pos<span class="token operator">^</span><span class="token number">2</span> <span class="token operator">&lt;</span> radius<span class="token operator">^</span><span class="token number">2</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="code-method-sample" data-lang="clj" data-name="Clojure"><pre class="language-"><code class="lang-clojure"><span class="token punctuation">(</span><span class="token keyword">defn</span> in-circle? <span class="token punctuation">[</span>pv r<span class="token punctuation">]</span>
  &quot;<span class="token keyword">take</span> <span class="token number">a</span> <span class="token keyword">vector</span> representing point <span class="token keyword">and</span> radius return <span class="token boolean">true</span> <span class="token keyword">if</span> the
  point is inside the circle&quot;
  <span class="token punctuation">(</span><span class="token keyword">&lt;</span> <span class="token punctuation">(</span><span class="token keyword">-&gt;&gt;</span>
      pv
      <span class="token punctuation">(</span><span class="token keyword">map</span> #<span class="token punctuation">(</span><span class="token keyword">*</span> % %<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">(</span><span class="token keyword">reduce</span> <span class="token keyword">+</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
     <span class="token punctuation">(</span><span class="token keyword">*</span> r r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="c" data-name="C"><pre class="language-"><code class="lang-c">bool <span class="token function">in_circle</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="cpp" data-name="C++"><pre class="language-"><code class="lang-cpp"><span class="token comment">/**
 * Check if the point (x, y) is within a circle of a given radius.
 * @param x coordinate one
 * @param y coordinate two
 * @param r radius of the circle (optional)
 * @return true if (x, y) is within the circle.
 */</span>
<span class="token keyword">inline</span> <span class="token keyword">bool</span> <span class="token function">in_circle</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">,</span> <span class="token keyword">double</span> r <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y <span class="token operator">&lt;</span> r <span class="token operator">*</span> r<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="js" data-name="JavaScript"><pre class="language-"><code class="lang-javascript"><span class="token keyword">function</span> <span class="token function">inCircle</span><span class="token punctuation">(</span><span class="token parameter">xPos<span class="token punctuation">,</span> yPos</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Setting radius to 1 for unit circle</span>
  <span class="token keyword">let</span> radius <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> xPos <span class="token operator">*</span> xPos <span class="token operator">+</span> yPos <span class="token operator">*</span> yPos <span class="token operator">&lt;</span> radius <span class="token operator">*</span> radius<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="hs" data-name="Haskell"><pre class="language-"><code class="lang-haskell"><span class="token hvariable">inCircle</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span> <span class="token hvariable">y</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">x</span><span class="token operator">^</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token hvariable">y</span><span class="token operator">^</span><span class="token number">2</span> <span class="token operator">&lt;</span> <span class="token number">1</span>
</code></pre>
</div><div class="code-method-sample" data-lang="rs" data-name="Rust"><pre class="language-"><code class="lang-rust"><span class="token keyword">fn</span> <span class="token function">in_circle</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> f64<span class="token punctuation">,</span> y<span class="token punctuation">:</span> f64<span class="token punctuation">,</span> radius<span class="token punctuation">:</span> f64<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> bool <span class="token punctuation">{</span>
    x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y <span class="token operator">&lt;</span> radius <span class="token operator">*</span> radius
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="d" data-name="D"><pre class="language-"><code class="lang-d"><span class="token keyword">bool</span> <span class="token function">inCircle</span><span class="token punctuation">(</span><span class="token keyword">real</span> x<span class="token punctuation">,</span> <span class="token keyword">real</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">^^</span> <span class="token number">2</span> <span class="token operator">+</span> y <span class="token operator">^^</span> <span class="token number">2</span> <span class="token operator">&lt;</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="go" data-name="Go"><pre class="language-"><code class="lang-go"><span class="token keyword">func</span> <span class="token function">inCircle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">float64</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x<span class="token operator">*</span>x<span class="token operator">+</span>y<span class="token operator">*</span>y <span class="token operator">&lt;</span> <span class="token number">1.0</span> <span class="token comment">// the radius of an unit circle is 1.0</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="r" data-name="R"><pre class="language-"><code class="lang-r">in_circle <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment"># Return True if the point is in the circle and False otherwise.</span>
        return<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token operator">*</span>y<span class="token punctuation">)</span> <span class="token operator">&lt;</span> radius<span class="token operator">*</span>radius<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="java" data-name="Java"><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">inCircle</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="swift" data-name="Swift"><pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">inCircle</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> radius<span class="token punctuation">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Bool</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>x<span class="token operator">*</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y<span class="token operator">*</span>y<span class="token punctuation">)</span> <span class="token operator">&lt;</span> radius<span class="token operator">*</span>radius
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="py" data-name="Python"><pre class="language-"><code class="lang-python"><span class="token keyword">def</span> <span class="token function">in_circle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;Return True if the point is in the circle and False otherwise.&quot;&quot;&quot;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>x<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token operator">*</span>y<span class="token punctuation">)</span> <span class="token operator">&lt;</span> radius<span class="token operator">*</span>radius
</code></pre>
</div><div class="code-method-sample" data-lang="cs" data-name="C#"><pre class="language-"><code class="lang-csharp"><span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">IsInMe</span><span class="token punctuation">(</span><span class="token class-name">Point</span> point<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">Pow</span><span class="token punctuation">(</span>point<span class="token punctuation">.</span>X<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">Pow</span><span class="token punctuation">(</span>point<span class="token punctuation">.</span>Y<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> Math<span class="token punctuation">.</span><span class="token function">Pow</span><span class="token punctuation">(</span>Radius<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div><div class="code-method-sample" data-lang="nim" data-name="Nim"><pre class="language-"><code class="lang-nim"><span class="token keyword">proc</span> <span class="token function">in_circle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token operator">:</span> float<span class="token punctuation">)</span><span class="token operator">:</span> bool <span class="token operator">=</span>
  <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y <span class="token operator">&lt;</span> radius <span class="token operator">*</span> radius
</code></pre>
</div><div class="code-method-sample" data-lang="ruby" data-name="Ruby"><pre class="language-"><code class="lang-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">in_circle</span></span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token comment"># Check if coords are in circle via Pythagorean Thm</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>x<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token operator">*</span>y<span class="token punctuation">)</span> <span class="token operator">&lt;</span> radius<span class="token operator">*</span>radius
<span class="token keyword">end</span>
</code></pre>
</div><div class="code-method-sample" data-lang="f90" data-name="Fortran90"><pre class="language-"><code class="lang-fortran"><span class="token keyword">FUNCTION</span> in_circle<span class="token punctuation">(</span>pos_x<span class="token punctuation">,</span> pos_y<span class="token punctuation">,</span> r<span class="token punctuation">)</span>
    <span class="token keyword">IMPLICIT NONE</span>
    <span class="token keyword">REAL</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTENT</span><span class="token punctuation">(</span><span class="token keyword">IN</span><span class="token punctuation">)</span> <span class="token operator">::</span> pos_x<span class="token punctuation">,</span> pos_y<span class="token punctuation">,</span> r
    <span class="token keyword">LOGICAL</span>              <span class="token operator">::</span> in_circle

    in_circle <span class="token operator">=</span> <span class="token punctuation">(</span>pos_x <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> pos_y <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> r <span class="token operator">**</span> <span class="token number">2</span>

<span class="token keyword">END FUNCTION</span> in_circle
</code></pre>
</div><div class="code-method-sample" data-lang="factor" data-name="Factor"><pre class="language-"><code class="lang-factor">[ ! in-circle check
  [ 2 ^ ] bi@ + ! get the distance from the center
  1 &lt;           ! see if it&apos;s less than the radius
]
</code></pre>
</div><div class="code-method-sample" data-lang="emojic" data-name="Emojicode"><pre class="language-"><code class="lang-emojicode">&#x2757;&#xFE0F; &#x1F4E5; point &#x261D;&#xFE0F; &#x27A1;&#xFE0F; &#x1F44C; &#x1F347;
  &#x1F4EA; point&#x2757;&#xFE0F; &#x27A1;&#xFE0F; point_x
  &#x1F4EB; point&#x2757;&#xFE0F; &#x27A1;&#xFE0F; point_y
  &#x21A9;&#xFE0F; &#x1F91C;point_x &#x2716;&#xFE0F; point_x &#x2795; point_y &#x2716;&#xFE0F; point_y&#x1F91B; &#x25C0;&#xFE0F; &#x1F91C;radius &#x2716;&#xFE0F; radius&#x1F91B;
&#x1F349;
</code></pre>
</div><div class="code-method-sample" data-lang="php" data-name="PHP"><pre class="language-"><code class="lang-php"><span class="token keyword">function</span> <span class="token function">in_circle</span><span class="token punctuation">(</span>float <span class="token variable">$positionX</span><span class="token punctuation">,</span> float <span class="token variable">$positionY</span><span class="token punctuation">,</span> float <span class="token variable">$radius</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span> bool
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token variable">$positionX</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token variable">$positionY</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token variable">$radius</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="lua" data-name="Lua"><pre class="language-"><code class="lang-lua"><span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">in_circle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
  <span class="token keyword">return</span> x<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token operator">*</span>y <span class="token operator">&lt;=</span> <span class="token number">1</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="code-method-sample" data-lang="racket" data-name="Racket"><pre class="language-"><code class="lang-lisp"><span class="token punctuation">(</span><span class="token car">define</span> <span class="token punctuation">(</span><span class="token car">in_circle</span> x y<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token car">&lt;</span> <span class="token punctuation">(</span><span class="token car">+</span> <span class="token punctuation">(</span><span class="token car">sqr</span> x<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token car">sqr</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span>
 <span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="scala" data-name="Scala"><pre class="language-"><code class="lang-scala"><span class="token keyword">def</span> inCircle<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span> <span class="token operator">=</span> x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y <span class="token operator">&lt;</span> <span class="token number">1</span>
</code></pre>
</div><div class="code-method-sample" data-lang="lisp" data-name="Common Lisp"><pre class="language-"><code class="lang-lisp"><span class="token punctuation">(</span><span class="token defun"><span class="token keyword">defun</span> <span class="token function">in-circle-p</span> <span class="token punctuation">(</span><span class="token arguments"><span class="token argument variable">x</span> <span class="token argument variable">y</span></span><span class="token punctuation">)</span></span>
  <span class="token string">&quot;Checks if a point is in a unit circle&quot;</span>
  <span class="token punctuation">(</span><span class="token car">&lt;</span> <span class="token punctuation">(</span><span class="token car">+</span> <span class="token punctuation">(</span><span class="token car">*</span> x x<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token car">*</span> y y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="asm-x64" data-name="X86-64 Assembly"><pre class="language-"><code class="lang-asm-x64"># <span class="token register variable">xmm0</span> <span class="token operator">-</span> x
# <span class="token register variable">xmm1</span> <span class="token operator">-</span> y
# RET <span class="token register variable">rax</span> <span class="token operator">-</span> bool
<span class="token label function">in_circle:</span>
  mulsd  <span class="token register variable">xmm0</span>, <span class="token register variable">xmm0</span>                  # Calculate x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y
  mulsd  <span class="token register variable">xmm1</span>, <span class="token register variable">xmm1</span>
  addsd  <span class="token register variable">xmm0</span>, <span class="token register variable">xmm1</span>
  movsd  <span class="token register variable">xmm1</span>, one                   # Set circle radius to <span class="token number">1</span>
  xor    <span class="token register variable">rax</span>, <span class="token register variable">rax</span>
  comisd <span class="token register variable">xmm1</span>, <span class="token register variable">xmm0</span>                  # Return bool <span class="token register variable">xmm0</span> <span class="token operator">&lt;</span> <span class="token register variable">xmm1</span>
  seta <span class="token register variable">al</span>
  ret
</code></pre>
</div><div class="code-method-sample" data-lang="bash" data-name="Bash"><pre class="language-"><code class="lang-bash"><span class="token function-name function">inCircle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> ret
    <span class="token builtin class-name">local</span> mag
    <span class="token variable"><span class="token punctuation">((</span>ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">))</span></span>
    <span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span>$<span class="token number">1</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> $<span class="token number">2</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">&lt;</span> <span class="token number">1073676289</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token comment"># 1073676289 = 32767 ** 2</span>
        <span class="token variable"><span class="token punctuation">((</span>ret <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">))</span></span>
    <span class="token keyword">fi</span>
    <span class="token builtin class-name">printf</span> <span class="token string">&quot;%d&quot;</span> <span class="token variable">$ret</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="kotlin" data-name="Kotlin"><pre class="language-"><code class="lang-kotlin"><span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">inCircle</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Double<span class="token punctuation">,</span> y<span class="token operator">:</span> Double<span class="token punctuation">,</span> radius<span class="token operator">:</span> Double <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y<span class="token punctuation">)</span> <span class="token operator">&lt;</span> radius <span class="token operator">*</span> radius
</code></pre>
</div></div></div>

<p>If it&apos;s in the circle, we increase an internal count by one, and in the end,</p>
<p><script type="math/tex; mode=display">
\text{Ratio} = \frac{\text{count in circle}}{\text{total number of points used}}
</script></p>
<p>If we use a small number of points, this will only give us a rough approximation, but as we start adding more and more points, the approximation becomes much, much better (as shown below)!</p>
<p>
    <img class="center" src="res/monte_carlo.gif" width="400">
</p>

<p>The true power of Monte Carlo comes from the fact that it can be used to integrate literally any object that can be embedded into the square.
As long as you can write some function to tell whether the provided point is inside the shape you want (like <code>in_circle()</code> in this case), you can use Monte Carlo integration!
This is obviously an incredibly powerful tool and has been used time and time again for many different areas of physics and engineering.
I can guarantee that we will see similar methods crop up all over the place in the future!</p>
<h2 id="video-explanation">Video Explanation</h2>
<p>Here is a video describing Monte Carlo integration:</p>
<div style="text-align:center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/AyBNnkYrSWY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

<h2 id="example-code">Example Code</h2>
<p>Monte Carlo methods are famous for their simplicity.
It doesn&apos;t take too many lines to get something simple going.
Here, we are just integrating a circle, like we described above; however, there is a small twist and trick.
Instead of calculating the area of the circle, we are instead trying to find the value of <script type="math/tex; ">\pi</script>, and
rather than integrating the entire circle, we are only integrating the upper right quadrant of the circle from <script type="math/tex; ">0 < x, y < 1</script>.
This saves a bit of computation time, but also requires us to multiply our output by <script type="math/tex; ">4</script>.</p>
<p>That&apos;s all there is to it!
Feel free to submit your version via pull request, and thanks for reading!</p>
<div class="code-method"><div class="code-method-definition"></div><div class="code-method-code"><div class="code-method-sample" data-lang="jl" data-name="Julia"><pre class="language-"><code class="lang-julia"><span class="token comment"># function to determine whether an x, y point is in the unit circle</span>
<span class="token keyword">function</span> in_circle<span class="token punctuation">(</span>x_pos<span class="token punctuation">:</span><span class="token punctuation">:</span>Float64<span class="token punctuation">,</span> y_pos<span class="token punctuation">:</span><span class="token punctuation">:</span>Float64<span class="token punctuation">)</span>

    <span class="token comment"># Setting radius to 1 for unit circle</span>
    radius <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">return</span> x_pos<span class="token operator">^</span><span class="token number">2</span> <span class="token operator">+</span> y_pos<span class="token operator">^</span><span class="token number">2</span> <span class="token operator">&lt;</span> radius<span class="token operator">^</span><span class="token number">2</span>
<span class="token keyword">end</span>

<span class="token comment"># function to integrate a unit circle to find pi via monte_carlo</span>
<span class="token keyword">function</span> monte_carlo<span class="token punctuation">(</span>n<span class="token punctuation">:</span><span class="token punctuation">:</span>Int64<span class="token punctuation">)</span>

    pi_count <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">:</span>n
        point_x <span class="token operator">=</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span>
        point_y <span class="token operator">=</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>in_circle<span class="token punctuation">(</span>point_x<span class="token punctuation">,</span> point_y<span class="token punctuation">)</span><span class="token punctuation">)</span>
            pi_count <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>

    <span class="token comment"># This is using a quarter of the unit sphere in a 1x1 box.</span>
    <span class="token comment"># The formula is pi = (box_length^2 / radius^2) * (pi_count / n), but we</span>
    <span class="token comment">#     are only using the upper quadrant and the unit circle, so we can use</span>
    <span class="token comment">#     4*pi_count/n instead</span>
    pi_estimate <span class="token operator">=</span> <span class="token number">4</span><span class="token operator">*</span>pi_count<span class="token operator">/</span>n
    <span class="token keyword">println</span><span class="token punctuation">(</span><span class="token string">&quot;The pi estimate is: &quot;</span><span class="token punctuation">,</span> pi_estimate<span class="token punctuation">)</span>
    <span class="token keyword">println</span><span class="token punctuation">(</span><span class="token string">&quot;Percent error is: &quot;</span><span class="token punctuation">,</span> signif<span class="token punctuation">(</span><span class="token number">100</span> <span class="token operator">*</span> abs<span class="token punctuation">(</span>pi_estimate <span class="token operator">-</span> pi<span class="token punctuation">)</span> <span class="token operator">/</span> pi<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot; %&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>

monte_carlo<span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="clj" data-name="Clojure"><pre class="language-"><code class="lang-clojure"><span class="token punctuation">(</span><span class="token keyword">ns</span> monte-carlo.core<span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token keyword">defn</span> in-circle? <span class="token punctuation">[</span>pv r<span class="token punctuation">]</span>
  &quot;<span class="token keyword">take</span> <span class="token number">a</span> <span class="token keyword">vector</span> representing point <span class="token keyword">and</span> radius return <span class="token boolean">true</span> <span class="token keyword">if</span> the
  point is inside the circle&quot;
  <span class="token punctuation">(</span><span class="token keyword">&lt;</span> <span class="token punctuation">(</span><span class="token keyword">-&gt;&gt;</span>
      pv
      <span class="token punctuation">(</span><span class="token keyword">map</span> #<span class="token punctuation">(</span><span class="token keyword">*</span> % %<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">(</span><span class="token keyword">reduce</span> <span class="token keyword">+</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
     <span class="token punctuation">(</span><span class="token keyword">*</span> r r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">defn</span> rand-point <span class="token punctuation">[</span>r<span class="token punctuation">]</span>
  <span class="token string">&quot;return a random point from (0,0) inclusive to (r,r) exclusive&quot;</span>
  <span class="token punctuation">(</span>repeatedly <span class="token number">2</span> #<span class="token punctuation">(</span><span class="token keyword">rand</span> r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">defn</span> monte-carlo <span class="token punctuation">[</span>n r<span class="token punctuation">]</span>
  &quot;<span class="token keyword">take</span> the number of random points <span class="token keyword">and</span> radius return an estimate to
pi&quot;
  <span class="token punctuation">(</span>*&apos; <span class="token number">4</span> <span class="token punctuation">(</span><span class="token keyword">/</span> n<span class="token punctuation">)</span>
      <span class="token punctuation">(</span><span class="token keyword">loop</span> <span class="token punctuation">[</span>i n <span class="token keyword">count</span> <span class="token number">0</span><span class="token punctuation">]</span>
        <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">zero?</span> i<span class="token punctuation">)</span>
          <span class="token keyword">count</span>
          <span class="token punctuation">(</span><span class="token keyword">recur</span> <span class="token punctuation">(</span><span class="token keyword">dec</span> i<span class="token punctuation">)</span>
                 <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span>in-circle? <span class="token punctuation">(</span>rand-point r<span class="token punctuation">)</span> r<span class="token punctuation">)</span>
                   <span class="token punctuation">(</span><span class="token keyword">inc</span> <span class="token keyword">count</span><span class="token punctuation">)</span>
                   <span class="token keyword">count</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">defn</span> -main <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>constant-pi Math/PI
        computed-pi <span class="token punctuation">(</span>monte-carlo <span class="token number">10000000</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">;; this may take some time on lower end machines</span>
        <span class="token keyword">difference</span> <span class="token punctuation">(</span>Math/abs <span class="token punctuation">(</span><span class="token keyword">-</span> constant-pi computed-pi<span class="token punctuation">)</span><span class="token punctuation">)</span>
        error <span class="token punctuation">(</span><span class="token keyword">*</span> <span class="token number">100</span> <span class="token punctuation">(</span><span class="token keyword">/</span> <span class="token keyword">difference</span> constant-pi<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">(</span><span class="token keyword">println</span> <span class="token string">&quot;world&apos;s PI: &quot;</span> constant-pi
             <span class="token string">&quot;,our PI: &quot;</span>    <span class="token punctuation">(</span><span class="token keyword">double</span> computed-pi<span class="token punctuation">)</span>
             <span class="token string">&quot;,error: &quot;</span> error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="c" data-name="C"><pre class="language-"><code class="lang-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;math.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdbool.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;time.h&gt;</span></span>

bool <span class="token function">in_circle</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">double</span> <span class="token function">monte_carlo</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> samples<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">unsigned</span> <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> samples<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">double</span> x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> RAND_MAX<span class="token punctuation">;</span>
        <span class="token keyword">double</span> y <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> RAND_MAX<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">in_circle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token number">4.0</span> <span class="token operator">*</span> count <span class="token operator">/</span> samples<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">srand</span><span class="token punctuation">(</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">double</span> estimate <span class="token operator">=</span> <span class="token function">monte_carlo</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;The estimate of pi is %g\n&quot;</span><span class="token punctuation">,</span> estimate<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Percentage error: %0.2f%%\n&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token function">fabs</span><span class="token punctuation">(</span>M_PI <span class="token operator">-</span> estimate<span class="token punctuation">)</span> <span class="token operator">/</span> M_PI<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="cpp" data-name="C++"><pre class="language-"><code class="lang-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstdlib&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;random&gt;</span></span>

<span class="token keyword">constexpr</span> <span class="token keyword">double</span> PI <span class="token operator">=</span> <span class="token number">3.14159265358979323846264338</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Check if the point (x, y) is within a circle of a given radius.
 * @param x coordinate one
 * @param y coordinate two
 * @param r radius of the circle (optional)
 * @return true if (x, y) is within the circle.
 */</span>
<span class="token keyword">inline</span> <span class="token keyword">bool</span> <span class="token function">in_circle</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">,</span> <span class="token keyword">double</span> r <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y <span class="token operator">&lt;</span> r <span class="token operator">*</span> r<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Return an estimate of PI using Monte Carlo integration.
 * @param samples number of iterations to use
 * @return estimate of pi
 */</span>
<span class="token keyword">double</span> <span class="token function">monte_carlo_pi</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> samples<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> std<span class="token operator">::</span>default_random_engine generator<span class="token punctuation">;</span>
    <span class="token keyword">static</span> std<span class="token operator">::</span>uniform_real_distribution<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">&gt;</span> <span class="token function">dist</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">unsigned</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> samples<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">double</span> x <span class="token operator">=</span> <span class="token function">dist</span><span class="token punctuation">(</span>generator<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">double</span> y <span class="token operator">=</span> <span class="token function">dist</span><span class="token punctuation">(</span>generator<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">in_circle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token operator">++</span>count<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token number">4.0</span> <span class="token operator">*</span> count <span class="token operator">/</span> samples<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">unsigned</span> samples<span class="token punctuation">;</span>

    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Enter samples to use: &quot;</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cin <span class="token operator">&gt;&gt;</span> samples<span class="token punctuation">;</span>

    <span class="token keyword">double</span> pi_estimate <span class="token operator">=</span> <span class="token function">monte_carlo_pi</span><span class="token punctuation">(</span>samples<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Pi = &quot;</span> <span class="token operator">&lt;&lt;</span> pi_estimate <span class="token operator">&lt;&lt;</span> <span class="token string">&apos;\n&apos;</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Percent error is: &quot;</span> <span class="token operator">&lt;&lt;</span> <span class="token number">100</span> <span class="token operator">*</span> std<span class="token operator">::</span><span class="token function">abs</span><span class="token punctuation">(</span>pi_estimate <span class="token operator">-</span> PI<span class="token punctuation">)</span> <span class="token operator">/</span> PI <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; %\n&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="js" data-name="JavaScript"><pre class="language-"><code class="lang-javascript"><span class="token comment">// submitted by xam4lor</span>
<span class="token keyword">function</span> <span class="token function">inCircle</span><span class="token punctuation">(</span><span class="token parameter">xPos<span class="token punctuation">,</span> yPos</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Setting radius to 1 for unit circle</span>
  <span class="token keyword">let</span> radius <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> xPos <span class="token operator">*</span> xPos <span class="token operator">+</span> yPos <span class="token operator">*</span> yPos <span class="token operator">&lt;</span> radius <span class="token operator">*</span> radius<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">monteCarlo</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> piCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> pointX <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> pointY <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">inCircle</span><span class="token punctuation">(</span>pointX<span class="token punctuation">,</span> pointY<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      piCount<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// This is using a quarter of the unit sphere in a 1x1 box.</span>
  <span class="token comment">// The formula is pi = (boxLength^2 / radius^2) * (piCount / n), but we</span>
  <span class="token comment">// are only using the upper quadrant and the unit circle, so we can use</span>
  <span class="token comment">// 4*piCount/n instead</span>
  <span class="token comment">// piEstimate = 4*piCount/n</span>
  <span class="token keyword">const</span> piEstimate <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">*</span> piCount <span class="token operator">/</span> n<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;Percent error is: %s%&apos;</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>piEstimate <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">monteCarlo</span><span class="token punctuation">(</span><span class="token number">100000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div><div class="code-method-sample" data-lang="hs" data-name="Haskell"><pre class="language-"><code class="lang-haskell"><span class="token import_statement"><span class="token keyword">import</span> System.Random</span>

<span class="token hvariable">monteCarloPi</span> <span class="token operator">::</span> <span class="token constant">RandomGen</span> <span class="token hvariable">g</span> <span class="token operator">=&gt;</span> <span class="token hvariable">g</span> <span class="token operator">-&gt;</span> <span class="token constant">Int</span> <span class="token operator">-&gt;</span> <span class="token constant">Float</span>
<span class="token hvariable">monteCarloPi</span> <span class="token hvariable">g</span> <span class="token hvariable">n</span> <span class="token operator">=</span> <span class="token hvariable">count</span> <span class="token operator">$</span> <span class="token builtin">filter</span> <span class="token hvariable">inCircle</span> <span class="token operator">$</span> <span class="token hvariable">makePairs</span>
  <span class="token keyword">where</span> <span class="token hvariable">makePairs</span> <span class="token operator">=</span> <span class="token builtin">take</span> <span class="token hvariable">n</span> <span class="token operator">$</span> <span class="token hvariable">toPair</span> <span class="token punctuation">(</span><span class="token hvariable">randomRs</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token hvariable">g</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token constant">Float</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token hvariable">toPair</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">y</span><span class="token operator">:</span><span class="token hvariable">rest</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span> <span class="token hvariable">y</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token hvariable">toPair</span> <span class="token hvariable">rest</span>
        <span class="token hvariable">inCircle</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span> <span class="token hvariable">y</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token hvariable">x</span><span class="token operator">^</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token hvariable">y</span><span class="token operator">^</span><span class="token number">2</span> <span class="token operator">&lt;</span> <span class="token number">1</span>
        <span class="token hvariable">count</span> <span class="token hvariable">l</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token builtin">fromIntegral</span> <span class="token punctuation">(</span><span class="token builtin">length</span> <span class="token hvariable">l</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token builtin">fromIntegral</span> <span class="token hvariable">n</span>

<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token keyword">do</span>
  <span class="token hvariable">g</span> <span class="token operator">&lt;-</span> <span class="token hvariable">newStdGen</span>
  <span class="token keyword">let</span> <span class="token hvariable">p</span> <span class="token operator">=</span> <span class="token hvariable">monteCarloPi</span> <span class="token hvariable">g</span> <span class="token number">100000</span>
  <span class="token builtin">putStrLn</span> <span class="token operator">$</span> <span class="token string">&quot;Estimated pi: &quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token hvariable">p</span>
  <span class="token builtin">putStrLn</span> <span class="token operator">$</span> <span class="token string">&quot;Percent error: &quot;</span> <span class="token operator">++</span> <span class="token builtin">show</span> <span class="token punctuation">(</span><span class="token number">100</span> <span class="token operator">*</span> <span class="token builtin">abs</span> <span class="token punctuation">(</span><span class="token builtin">pi</span> <span class="token operator">-</span> <span class="token hvariable">p</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token builtin">pi</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="rs" data-name="Rust"><pre class="language-"><code class="lang-rust"><span class="token comment">// Submitted by jess 3jane</span>

<span class="token keyword">extern</span> <span class="token keyword">crate</span> rand<span class="token punctuation">;</span>

<span class="token keyword">use</span> std<span class="token punctuation">::</span>f64<span class="token punctuation">::</span>consts<span class="token punctuation">::</span>PI<span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function">in_circle</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> f64<span class="token punctuation">,</span> y<span class="token punctuation">:</span> f64<span class="token punctuation">,</span> radius<span class="token punctuation">:</span> f64<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> bool <span class="token punctuation">{</span>
    x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y <span class="token operator">&lt;</span> radius <span class="token operator">*</span> radius
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function">monte_carlo</span><span class="token punctuation">(</span>n<span class="token punctuation">:</span> i64<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> f64 <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">..</span>n <span class="token punctuation">{</span>
        <span class="token keyword">let</span> x <span class="token operator">=</span> rand<span class="token punctuation">::</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> y <span class="token operator">=</span> rand<span class="token punctuation">::</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token function">in_circle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// return our pi estimate</span>
    <span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> count<span class="token punctuation">)</span> <span class="token keyword">as</span> f64 <span class="token operator">/</span> n <span class="token keyword">as</span> f64
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> pi_estimate <span class="token operator">=</span> <span class="token function">monte_carlo</span><span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">println!</span><span class="token punctuation">(</span>
        <span class="token string">&quot;Percent error is {:.3}%&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token number">100.0</span> <span class="token operator">*</span> <span class="token punctuation">(</span>pi_estimate <span class="token operator">-</span> PI<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> PI<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="d" data-name="D"><pre class="language-"><code class="lang-d"><span class="token comment">///Returns true if a point (x, y) is in the circle with radius r</span>
<span class="token keyword">bool</span> <span class="token function">inCircle</span><span class="token punctuation">(</span><span class="token keyword">real</span> x<span class="token punctuation">,</span> <span class="token keyword">real</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">^^</span> <span class="token number">2</span> <span class="token operator">+</span> y <span class="token operator">^^</span> <span class="token number">2</span> <span class="token operator">&lt;</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">///Calculate pi using monte carlo</span>
<span class="token keyword">real</span> <span class="token function">monteCarloPI</span><span class="token punctuation">(</span><span class="token keyword">ulong</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">import</span> std<span class="token punctuation">.</span>algorithm <span class="token punctuation">:</span> count<span class="token punctuation">;</span>
    <span class="token keyword">import</span> std<span class="token punctuation">.</span>random <span class="token punctuation">:</span> uniform01<span class="token punctuation">;</span>
    <span class="token keyword">import</span> std<span class="token punctuation">.</span>range <span class="token punctuation">:</span> generate<span class="token punctuation">,</span> take<span class="token punctuation">;</span>
    <span class="token keyword">import</span> std<span class="token punctuation">.</span>typecons <span class="token punctuation">:</span> tuple<span class="token punctuation">;</span>

    <span class="token keyword">auto</span> piCount <span class="token operator">=</span>  <span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> tuple<span class="token operator">!</span><span class="token punctuation">(</span>&quot;<span class="token string">x&quot;, &quot;</span>y<span class="token string">&quot;)(uniform01, uniform01))
        .take(n)
        .count!(a =&gt; inCircle(a.x, a.y));
    return piCount * 4.0 / n;
}

void main()
{
    import std.math : abs, PI;
    import std.stdio : writeln;

    auto p = monteCarloPI(100_000);
    writeln(&quot;</span>Estimated pi<span class="token punctuation">:</span> <span class="token string">&quot;, p);
    writeln(&quot;</span>Percent error<span class="token punctuation">:</span> &quot;<span class="token punctuation">,</span> <span class="token function">abs</span><span class="token punctuation">(</span>p <span class="token operator">-</span> PI<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">/</span> PI<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="go" data-name="Go"><pre class="language-"><code class="lang-go"><span class="token comment">// Submitted by Chinmaya Mahesh (chin123)</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">&quot;fmt&quot;</span>
    <span class="token string">&quot;math&quot;</span>
    <span class="token string">&quot;math/rand&quot;</span>
    <span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">inCircle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y <span class="token builtin">float64</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x<span class="token operator">*</span>x<span class="token operator">+</span>y<span class="token operator">*</span>y <span class="token operator">&lt;</span> <span class="token number">1.0</span> <span class="token comment">// the radius of an unit circle is 1.0</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">monteCarlo</span><span class="token punctuation">(</span>samples <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    count <span class="token operator">:=</span> <span class="token number">0</span>
    s <span class="token operator">:=</span> rand<span class="token punctuation">.</span><span class="token function">NewSource</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    r <span class="token operator">:=</span> rand<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>

    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> samples<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
        x<span class="token punctuation">,</span> y <span class="token operator">:=</span> r<span class="token punctuation">.</span><span class="token function">Float64</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span><span class="token function">Float64</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token function">inCircle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            count <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    estimate <span class="token operator">:=</span> <span class="token number">4.0</span> <span class="token operator">*</span> <span class="token function">float64</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">float64</span><span class="token punctuation">(</span>samples<span class="token punctuation">)</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;The estimate of pi is&quot;</span><span class="token punctuation">,</span> estimate<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Which has an error of %f%%\n&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token operator">*</span>math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>Pi<span class="token operator">-</span>estimate<span class="token punctuation">)</span><span class="token operator">/</span>math<span class="token punctuation">.</span>Pi<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">monteCarlo</span><span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="r" data-name="R"><pre class="language-"><code class="lang-r">
in_circle <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment"># Return True if the point is in the circle and False otherwise.</span>
        return<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token operator">*</span>y<span class="token punctuation">)</span> <span class="token operator">&lt;</span> radius<span class="token operator">*</span>radius<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

monte_carlo <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span>n_samples<span class="token punctuation">,</span> radius <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment"># Return the estimate of pi using the monte carlo algorithm.</span>

        <span class="token comment"># Sample x, y from the uniform distribution</span>
        x <span class="token operator">&lt;-</span> runif<span class="token punctuation">(</span>n_samples<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> radius<span class="token punctuation">)</span>
        y <span class="token operator">&lt;-</span> runif<span class="token punctuation">(</span>n_samples<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> radius<span class="token punctuation">)</span>

        <span class="token comment"># Count the number of points inside the circle</span>
        in_circle_count <span class="token operator">&lt;-</span> sum<span class="token punctuation">(</span>in_circle<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment"># Since we&apos;ve generated points in upper left quadrant ([0,radius], [0,])</span>
        <span class="token comment"># We need to multiply the number of points by 4    </span>
        pi_estimate <span class="token operator">&lt;-</span> <span class="token number">4</span> <span class="token operator">*</span> in_circle_count <span class="token operator">/</span> n_samples

        return<span class="token punctuation">(</span>pi_estimate<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

pi_estimate <span class="token operator">&lt;-</span> monte_carlo<span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">)</span>
percent_error <span class="token operator">&lt;-</span> abs<span class="token punctuation">(</span>pi <span class="token operator">-</span> pi_estimate<span class="token punctuation">)</span><span class="token operator">/</span>pi

print<span class="token punctuation">(</span>paste<span class="token punctuation">(</span><span class="token string">&quot;The estimate of pi is: &quot;</span><span class="token punctuation">,</span> formatC<span class="token punctuation">(</span>pi_estimate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
print<span class="token punctuation">(</span>paste<span class="token punctuation">(</span><span class="token string">&quot;The percent error is:: &quot;</span><span class="token punctuation">,</span> formatC<span class="token punctuation">(</span>percent_error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="java" data-name="Java"><pre class="language-"><code class="lang-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span><span class="token class-name">Random</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MonteCarlo</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">double</span> piEstimation <span class="token operator">=</span> <span class="token function">monteCarlo</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Estimated pi value: &quot;</span> <span class="token operator">+</span> piEstimation<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Percent error: &quot;</span> <span class="token operator">+</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>piEstimation <span class="token operator">-</span> <span class="token class-name">Math</span><span class="token punctuation">.</span>PI<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token class-name">Math</span><span class="token punctuation">.</span>PI<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// function to check whether point (x,y) is in unit circle</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">inCircle</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// function to calculate estimation of pi</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">double</span> <span class="token function">monteCarlo</span><span class="token punctuation">(</span><span class="token keyword">int</span> samples<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> piCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token class-name">Random</span> random <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> samples<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">double</span> x <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">double</span> y <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">inCircle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                piCount<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> <span class="token number">4.0</span> <span class="token operator">*</span> piCount <span class="token operator">/</span> samples<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="swift" data-name="Swift"><pre class="language-"><code class="lang-swift"><span class="token keyword">func</span> <span class="token function">inCircle</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> radius<span class="token punctuation">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Bool</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>x<span class="token operator">*</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y<span class="token operator">*</span>y<span class="token punctuation">)</span> <span class="token operator">&lt;</span> radius<span class="token operator">*</span>radius
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">monteCarlo</span><span class="token punctuation">(</span>n<span class="token punctuation">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">Double</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> radius<span class="token punctuation">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">var</span> piCount <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">var</span> randX<span class="token punctuation">:</span> <span class="token builtin">Double</span>
    <span class="token keyword">var</span> randY<span class="token punctuation">:</span> <span class="token builtin">Double</span>

    <span class="token keyword">for</span> <span class="token number">_</span> <span class="token keyword">in</span> <span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>n <span class="token punctuation">{</span>
        randX <span class="token operator">=</span> <span class="token builtin">Double</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&lt;</span>radius<span class="token punctuation">)</span>
        randY <span class="token operator">=</span> <span class="token builtin">Double</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&lt;</span>radius<span class="token punctuation">)</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">inCircle</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> randX<span class="token punctuation">,</span> y<span class="token punctuation">:</span> randY<span class="token punctuation">,</span> radius<span class="token punctuation">:</span> radius<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            piCount <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> piEstimate <span class="token operator">=</span> <span class="token function">Double</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> piCount<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token function">Double</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> piEstimate
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> piEstimate <span class="token operator">=</span> <span class="token function">monteCarlo</span><span class="token punctuation">(</span>n<span class="token punctuation">:</span> <span class="token number">10000</span><span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Pi estimate is: &quot;</span><span class="token punctuation">,</span> piEstimate<span class="token punctuation">)</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Percent error is: <span class="token interpolation"><span class="token delimiter variable">\(</span><span class="token number">100</span> <span class="token operator">*</span> <span class="token function">abs</span><span class="token punctuation">(</span>piEstimate <span class="token operator">-</span> <span class="token builtin">Double</span><span class="token punctuation">.</span>pi<span class="token punctuation">)</span><span class="token operator">/</span><span class="token builtin">Double</span><span class="token punctuation">.</span>pi<span class="token delimiter variable">)</span></span>%&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="py" data-name="Python"><pre class="language-"><code class="lang-python"><span class="token keyword">import</span> math
<span class="token keyword">import</span> random


<span class="token keyword">def</span> <span class="token function">in_circle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;Return True if the point is in the circle and False otherwise.&quot;&quot;&quot;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>x<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token operator">*</span>y<span class="token punctuation">)</span> <span class="token operator">&lt;</span> radius<span class="token operator">*</span>radius

<span class="token keyword">def</span> <span class="token function">monte_carlo</span><span class="token punctuation">(</span>n_samples<span class="token punctuation">,</span> radius <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;Return the estimate of pi using the monte carlo algorithm.&quot;&quot;&quot;</span>
    in_circle_count <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>n_samples<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token comment"># Sample x, y from the uniform distribution</span>
        x <span class="token operator">=</span> random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> radius<span class="token punctuation">)</span>
        y <span class="token operator">=</span> random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> radius<span class="token punctuation">)</span>

        <span class="token comment"># Count the number of points inside the circle</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>in_circle<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            in_circle_count <span class="token operator">+=</span> <span class="token number">1</span>

    <span class="token comment"># Since we&apos;ve generated points in upper left quadrant ([0,radius], [0, radius])</span>
    <span class="token comment"># We need to multiply the number of points by 4    </span>
    pi_estimate <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">*</span> in_circle_count <span class="token operator">/</span> <span class="token punctuation">(</span>n_samples<span class="token punctuation">)</span>

    <span class="token keyword">return</span> pi_estimate

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&apos;__main__&apos;</span><span class="token punctuation">:</span>

    pi_estimate <span class="token operator">=</span> monte_carlo<span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">)</span>
    percent_error <span class="token operator">=</span> <span class="token number">100</span><span class="token operator">*</span><span class="token builtin">abs</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span>pi <span class="token operator">-</span> pi_estimate<span class="token punctuation">)</span><span class="token operator">/</span>math<span class="token punctuation">.</span>pi

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;The estimate of pi is: {:.3f}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>pi_estimate<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;The percent error is: {:.3f}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>percent_error<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="cs" data-name="C#"><h5 id="montecarlocs">MonteCarlo.cs</h5>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> MonteCarloIntegration
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MonteCarlo</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">Run</span><span class="token punctuation">(</span><span class="token keyword">int</span> samples<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> circle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Circle</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> random <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> samples<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">var</span> point <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span>random<span class="token punctuation">.</span><span class="token function">NextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> random<span class="token punctuation">.</span><span class="token function">NextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>circle<span class="token punctuation">.</span><span class="token function">IsInMe</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    count<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> <span class="token number">4.0</span> <span class="token operator">*</span> count <span class="token operator">/</span> samples<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h5 id="circlecs">Circle.cs</h5>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> MonteCarloIntegration
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">struct</span> Point
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> X <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> Y <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">,</span> <span class="token keyword">double</span> y<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>X <span class="token operator">=</span> x<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Y <span class="token operator">=</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Circle</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token keyword">double</span> Radius <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">private</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token function">Circle</span><span class="token punctuation">(</span><span class="token keyword">double</span> radius<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Radius <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span>radius<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token keyword">bool</span> <span class="token function">IsInMe</span><span class="token punctuation">(</span><span class="token class-name">Point</span> point<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">Pow</span><span class="token punctuation">(</span>point<span class="token punctuation">.</span>X<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">Pow</span><span class="token punctuation">(</span>point<span class="token punctuation">.</span>Y<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> Math<span class="token punctuation">.</span><span class="token function">Pow</span><span class="token punctuation">(</span>Radius<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h5 id="programcs">Program.cs</h5>
<pre class="language-"><code class="lang-csharp"><span class="token keyword">using</span> System<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> MonteCarloIntegration
<span class="token punctuation">{</span>
    <span class="token keyword">class</span> <span class="token class-name">Program</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">var</span> monteCarlo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MonteCarlo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Running with 10,000,000 samples.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> piEstimate <span class="token operator">=</span> monteCarlo<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>$<span class="token string">&quot;The estimate of pi is: {piEstimate}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>$<span class="token string">&quot;The percent error is: {Math.Abs(piEstimate - Math.PI) / Math.PI * 100}%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="nim" data-name="Nim"><pre class="language-"><code class="lang-nim"><span class="token keyword">import</span> random
<span class="token keyword">import</span> math

<span class="token function">randomize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">proc</span> <span class="token function">in_circle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token operator">:</span> float<span class="token punctuation">)</span><span class="token operator">:</span> bool <span class="token operator">=</span>
  <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y <span class="token operator">&lt;</span> radius <span class="token operator">*</span> radius

<span class="token keyword">proc</span> <span class="token function">monte_carlo</span><span class="token punctuation">(</span>samples<span class="token operator">:</span> int<span class="token punctuation">)</span><span class="token operator">:</span> float <span class="token operator">=</span>
  <span class="token keyword">const</span> radius<span class="token operator">:</span> float <span class="token operator">=</span> <span class="token number">1</span>
  <span class="token keyword">var</span> count<span class="token operator">:</span> int <span class="token operator">=</span> <span class="token number">0</span>

  <span class="token keyword">for</span> i <span class="token operator">in</span> <span class="token number">0</span> <span class="token operator">..</span> <span class="token operator">&lt;</span> samples<span class="token operator">:</span>
    <span class="token keyword">let</span>
      x<span class="token operator">:</span> float <span class="token operator">=</span> <span class="token function">random</span><span class="token punctuation">(</span>radius<span class="token punctuation">)</span>
      y<span class="token operator">:</span> float <span class="token operator">=</span> <span class="token function">random</span><span class="token punctuation">(</span>radius<span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token function">in_circle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token punctuation">)</span><span class="token operator">:</span>
      count <span class="token operator">+=</span> <span class="token number">1</span>

  <span class="token keyword">let</span> pi_estimate<span class="token operator">:</span> float <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">*</span> count <span class="token operator">/</span> samples
  <span class="token keyword">return</span> pi_estimate

<span class="token keyword">let</span> estimate<span class="token operator">:</span> float <span class="token operator">=</span> <span class="token function">monte_carlo</span><span class="token punctuation">(</span><span class="token number">1000000</span><span class="token punctuation">)</span>

echo <span class="token string">&quot;the estimate of pi is &quot;</span><span class="token punctuation">,</span> estimate
echo <span class="token string">&quot;percent error: &quot;</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>estimate <span class="token operator">-</span> PI<span class="token punctuation">)</span><span class="token operator">/</span>PI<span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="ruby" data-name="Ruby"><pre class="language-"><code class="lang-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">in_circle</span></span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token comment"># Check if coords are in circle via Pythagorean Thm</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>x<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token operator">*</span>y<span class="token punctuation">)</span> <span class="token operator">&lt;</span> radius<span class="token operator">*</span>radius
<span class="token keyword">end</span>

<span class="token keyword">def</span> <span class="token method-definition"><span class="token function">monte_carlo</span></span><span class="token punctuation">(</span>n_samples<span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token comment"># estimate pi via monte carlo sampling</span>
  in_circle_count <span class="token operator">=</span> <span class="token number">0.0</span>

  <span class="token keyword">for</span> _ <span class="token keyword">in</span> <span class="token number">0.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>n_samples
    <span class="token comment"># randomly choose coords within square</span>
    x <span class="token operator">=</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span>radius
    y <span class="token operator">=</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span>radius
    <span class="token keyword">if</span> in_circle<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token punctuation">)</span>
      in_circle_count <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>

  <span class="token comment"># circle area is pi*r^2 and rect area is 4r^2</span>
  <span class="token comment"># ratio between the two is then pi/4 so multiply by 4 to get pi</span>
  <span class="token keyword">return</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token punctuation">(</span>in_circle_count <span class="token operator">/</span> n_samples<span class="token punctuation">)</span>

<span class="token keyword">end</span>


<span class="token comment"># Main</span>
pi_estimate <span class="token operator">=</span> monte_carlo<span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">)</span>
percent_error <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token punctuation">(</span>pi_estimate <span class="token operator">-</span> <span class="token constant">Math</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">PI</span><span class="token punctuation">)</span><span class="token punctuation">.</span>abs <span class="token operator">/</span> <span class="token constant">Math</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">PI</span>

puts <span class="token string">&quot;The estimate of pi is: <span class="token interpolation"><span class="token delimiter tag">#{</span>pi_estimate<span class="token punctuation">.</span>round<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token delimiter tag">}</span></span>&quot;</span>
puts <span class="token string">&quot;The percent error is: <span class="token interpolation"><span class="token delimiter tag">#{</span>percent_error<span class="token punctuation">.</span>round<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token delimiter tag">}</span></span>&quot;</span>
</code></pre>
</div><div class="code-method-sample" data-lang="f90" data-name="Fortran90"><pre class="language-"><code class="lang-fortran"><span class="token keyword">FUNCTION</span> in_circle<span class="token punctuation">(</span>pos_x<span class="token punctuation">,</span> pos_y<span class="token punctuation">,</span> r<span class="token punctuation">)</span>
    <span class="token keyword">IMPLICIT NONE</span>
    <span class="token keyword">REAL</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTENT</span><span class="token punctuation">(</span><span class="token keyword">IN</span><span class="token punctuation">)</span> <span class="token operator">::</span> pos_x<span class="token punctuation">,</span> pos_y<span class="token punctuation">,</span> r
    <span class="token keyword">LOGICAL</span>              <span class="token operator">::</span> in_circle

    in_circle <span class="token operator">=</span> <span class="token punctuation">(</span>pos_x <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> pos_y <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> r <span class="token operator">**</span> <span class="token number">2</span>

<span class="token keyword">END FUNCTION</span> in_circle 

<span class="token keyword">PROGRAM</span> monte_carlo

    <span class="token keyword">IMPLICIT NONE</span>

    <span class="token keyword">INTERFACE</span>
        <span class="token keyword">FUNCTION</span> in_circle<span class="token punctuation">(</span>pos_x<span class="token punctuation">,</span> pos_y<span class="token punctuation">,</span> r<span class="token punctuation">)</span> 
            <span class="token keyword">IMPLICIT NONE</span>
            <span class="token keyword">REAL</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTENT</span><span class="token punctuation">(</span><span class="token keyword">IN</span><span class="token punctuation">)</span> <span class="token operator">::</span> pos_x<span class="token punctuation">,</span> pos_y<span class="token punctuation">,</span> r
            <span class="token keyword">LOGICAL</span>              <span class="token operator">::</span> in_circle
        <span class="token keyword">END FUNCTION</span> in_circle 
    <span class="token keyword">END INTERFACE</span>

    <span class="token keyword">INTEGER</span>  <span class="token operator">::</span> i<span class="token punctuation">,</span>n
    <span class="token keyword">REAL</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">::</span> pos_x<span class="token punctuation">,</span>pos_y<span class="token punctuation">,</span> r<span class="token punctuation">,</span> pi_est<span class="token punctuation">,</span> pi_count<span class="token punctuation">,</span> pi_error<span class="token punctuation">,</span> pi

    <span class="token comment">! Calculate Pi from trigonometric functions as reference</span>
    pi       <span class="token operator">=</span> DACOS<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.d0</span><span class="token punctuation">)</span>
    n        <span class="token operator">=</span> <span class="token number">1000000</span>
    r        <span class="token operator">=</span> <span class="token number">1d0</span>
    pos_x    <span class="token operator">=</span> <span class="token number">0d0</span>
    pos_y    <span class="token operator">=</span> <span class="token number">0d0</span>
    pi_count <span class="token operator">=</span> <span class="token number">0d0</span>

    <span class="token keyword">DO</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>n

        <span class="token keyword">CALL</span> RANDOM_NUMBER<span class="token punctuation">(</span>pos_x<span class="token punctuation">)</span>
        <span class="token keyword">CALL</span> RANDOM_NUMBER<span class="token punctuation">(</span>pos_y<span class="token punctuation">)</span>

        <span class="token keyword">IF</span> <span class="token punctuation">(</span>in_circle<span class="token punctuation">(</span>pos_x<span class="token punctuation">,</span> pos_y<span class="token punctuation">,</span> r<span class="token punctuation">)</span> <span class="token operator">.EQV.</span> <span class="token boolean">.TRUE.</span><span class="token punctuation">)</span> <span class="token keyword">THEN</span> 

            pi_count <span class="token operator">=</span> pi_count <span class="token operator">+</span> <span class="token number">1d0</span>

        <span class="token keyword">END IF</span>
    <span class="token keyword">END DO</span>

    pi_est   <span class="token operator">=</span> <span class="token number">4d0</span> <span class="token operator">*</span> pi_count <span class="token operator">/</span> n
    pi_error <span class="token operator">=</span> <span class="token number">100d0</span> <span class="token operator">*</span> <span class="token punctuation">(</span>abs<span class="token punctuation">(</span>pi_est <span class="token operator">-</span> pi<span class="token punctuation">)</span><span class="token operator">/</span>pi<span class="token punctuation">)</span>

    <span class="token keyword">WRITE</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token string">&apos;(A, F12.4)&apos;</span><span class="token punctuation">)</span> <span class="token string">&apos;The pi estimate is: &apos;</span><span class="token punctuation">,</span> pi_est
    <span class="token keyword">WRITE</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token string">&apos;(A, F12.4, A)&apos;</span><span class="token punctuation">)</span> <span class="token string">&apos;Percent error is: &apos;</span><span class="token punctuation">,</span> pi_error<span class="token punctuation">,</span> <span class="token string">&apos; %&apos;</span>

<span class="token keyword">END PROGRAM</span> monte_carlo
</code></pre>
</div><div class="code-method-sample" data-lang="factor" data-name="Factor"><pre class="language-"><code class="lang-factor">USING: locals random math.ranges math.functions ;

:: monte-carlo ( n in-shape?: ( x y -- ? ) -- % )
  n <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iota</span><span class="token punctuation">&gt;</span></span> [ drop random-unit random-unit in-shape? call ] count n /
; inline

! Use the monte-carlo approximation to calculate pi
: monte-carlo-pi ( n -- pi-approx )
  [ ! in-circle check
    [ 2 ^ ] bi@ + ! get the distance from the center
    1 &lt;           ! see if it&apos;s less than the radius
  ]
  monte-carlo 4 * &gt;float
;

USING: math.constants ;
10000000 monte-carlo-pi ! Approximate pi
dup .                   ! Print the approximation
pi - pi / 100 * &gt;float abs .  ! And the error margin
</code></pre>
</div><div class="code-method-sample" data-lang="emojic" data-name="Emojicode"><pre class="language-"><code class="lang-emojicode">&#x1F407; &#x261D;&#xFE0F; &#x1F347;
  &#x1F58D;&#x1F195; x &#x1F4AF;
  &#x1F58D;&#x1F195; y &#x1F4AF;

  &#x1F195; &#x1F37C; x &#x1F4AF; &#x1F37C; y &#x1F4AF; &#x1F347; &#x1F349;

  &#x2757;&#xFE0F; &#x1F4EA; &#x27A1;&#xFE0F; &#x1F4AF; &#x1F347;
    &#x21A9;&#xFE0F; x
  &#x1F349;

  &#x2757;&#xFE0F; &#x1F4EB; &#x27A1;&#xFE0F; &#x1F4AF; &#x1F347;
    &#x21A9;&#xFE0F; y
  &#x1F349;
&#x1F349;

&#x1F407; &#x1F315; &#x1F347;
  &#x1F58D;&#x1F195; radius &#x1F4AF;

  &#x1F195; given_radius &#x1F4AF; &#x1F347;
    &#x1F3E7; given_radius&#x2757;&#xFE0F; &#x27A1;&#xFE0F; &#x1F58D;radius
  &#x1F349;

  &#x2757;&#xFE0F; &#x1F4E5; point &#x261D;&#xFE0F; &#x27A1;&#xFE0F; &#x1F44C; &#x1F347;
    &#x1F4EA; point&#x2757;&#xFE0F; &#x27A1;&#xFE0F; point_x
    &#x1F4EB; point&#x2757;&#xFE0F; &#x27A1;&#xFE0F; point_y
    &#x21A9;&#xFE0F; &#x1F91C;point_x &#x2716;&#xFE0F; point_x &#x2795; point_y &#x2716;&#xFE0F; point_y&#x1F91B; &#x25C0;&#xFE0F; &#x1F91C;radius &#x2716;&#xFE0F; radius&#x1F91B;
  &#x1F349;
&#x1F349;

&#x1F407; &#x1F921; &#x1F347;
  &#x1F407; &#x2757;&#xFE0F; &#x1F3C3;&#x200D;&#x2640;&#xFE0F; samples &#x1F522; &#x27A1;&#xFE0F; &#x1F4AF; &#x1F347;
    &#x1F195;&#x1F315;&#x1F195; 1.0 &#x2757;&#xFE0F; &#x27A1;&#xFE0F; circle
    0 &#x27A1;&#xFE0F; &#x1F58D;&#x1F195; count

    &#x1F195;&#x1F3B0;&#x1F195; &#x2757;&#xFE0F; &#x27A1;&#xFE0F; random

    &#x1F502; i &#x1F195;&#x23E9;&#x23E9; 0 samples&#x2757;&#xFE0F; &#x1F347;
      &#x1F195;&#x261D;&#xFE0F;&#x1F195; &#x1F4AF; random&#x2757;&#xFE0F; &#x1F4AF; random&#x2757;&#xFE0F;&#x2757;&#xFE0F; &#x27A1;&#xFE0F; point
      &#x21AA;&#xFE0F; &#x1F4E5; circle point&#x2757;&#xFE0F; &#x1F347;
        count &#x2B05;&#xFE0F; &#x2795; 1
      &#x1F349;
    &#x1F349;

    &#x21A9;&#xFE0F; 4.0 &#x2716;&#xFE0F; &#x1F4AF; count&#x2757;&#xFE0F; &#x2797; &#x1F4AF;samples&#x2757;&#xFE0F;
  &#x1F349;
&#x1F349;

&#x1F3C1; &#x1F347;
  &#x1F600; &#x1F524;Running with 10,000,000 samples.&#x1F524;&#x2757;&#xFE0F;
  &#x1F3C3;&#x200D;&#x2640;&#xFE0F;&#x1F407;&#x1F921; 10000000&#x2757;&#xFE0F; &#x27A1;&#xFE0F; pi_estimate
  &#x1F600; &#x1F36A;&#x1F524;The estimate of pi is: &#x1F524; &#x1F521; pi_estimate 10&#x2757;&#x1F36A;&#x2757;&#xFE0F;
  &#x1F3E7; &#x1F91C;pi_estimate &#x2796; &#x1F967;&#x1F54A;&#x1F4AF; &#x2757;&#xFE0F;&#x1F91B;&#x2757;&#xFE0F; &#x2797; &#x1F967;&#x1F54A;&#x1F4AF; &#x2757;&#xFE0F; &#x2716;&#xFE0F; 100 &#x27A1;&#xFE0F; percent_error
  &#x1F600; &#x1F36A;&#x1F524;The percent error is: &#x1F524; &#x1F521; percent_error 10&#x2757; &#x1F524;%&#x1F524;&#x1F36A;&#x2757;&#xFE0F;
&#x1F349;
</code></pre>
</div><div class="code-method-sample" data-lang="php" data-name="PHP"><pre class="language-"><code class="lang-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">in_circle</span><span class="token punctuation">(</span>float <span class="token variable">$positionX</span><span class="token punctuation">,</span> float <span class="token variable">$positionY</span><span class="token punctuation">,</span> float <span class="token variable">$radius</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span> bool
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token variable">$positionX</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token variable">$positionY</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token variable">$radius</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">random_zero_to_one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> float
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">mt_getrandmax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">monte_carlo</span><span class="token punctuation">(</span>int <span class="token variable">$samples</span><span class="token punctuation">,</span> float <span class="token variable">$radius</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span> float
<span class="token punctuation">{</span>
    <span class="token variable">$inCircleCount</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token variable">$i</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token variable">$i</span> <span class="token operator">&lt;</span> <span class="token variable">$samples</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">in_circle</span><span class="token punctuation">(</span><span class="token function">random_zero_to_one</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token variable">$radius</span><span class="token punctuation">,</span> <span class="token function">random_zero_to_one</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token variable">$radius</span><span class="token punctuation">,</span> <span class="token variable">$radius</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$inCircleCount</span><span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token variable">$inCircleCount</span> <span class="token operator">/</span> <span class="token variable">$samples</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$piEstimate</span> <span class="token operator">=</span> <span class="token function">monte_carlo</span><span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$percentError</span> <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span><span class="token variable">$piEstimate</span> <span class="token operator">-</span> <span class="token function">pi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">pi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token single-quoted-string string">&apos;The estimate of PI is: %s&apos;</span><span class="token punctuation">,</span> <span class="token variable">$piEstimate</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token single-quoted-string string">&apos;The percent error is: %s&apos;</span><span class="token punctuation">,</span> <span class="token variable">$percentError</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">echo</span> <span class="token constant">PHP_EOL</span><span class="token punctuation">;</span>
</code></pre>
</div><div class="code-method-sample" data-lang="lua" data-name="Lua"><pre class="language-"><code class="lang-lua"><span class="token keyword">local</span> <span class="token keyword">function</span> <span class="token function">in_circle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>
  <span class="token keyword">return</span> x<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token operator">*</span>y <span class="token operator">&lt;=</span> <span class="token number">1</span>
<span class="token keyword">end</span>

<span class="token keyword">function</span> <span class="token function">monte_carlo</span><span class="token punctuation">(</span>nsamples<span class="token punctuation">)</span>
  <span class="token keyword">local</span> count <span class="token operator">=</span> <span class="token number">0</span>

  <span class="token keyword">for</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>nsamples <span class="token keyword">do</span>
    <span class="token keyword">if</span> <span class="token function">in_circle</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">then</span>
      count <span class="token operator">=</span> count <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token keyword">end</span>
  <span class="token keyword">end</span>

  <span class="token keyword">return</span> <span class="token number">4</span> <span class="token operator">*</span> count<span class="token operator">/</span>nsamples
<span class="token keyword">end</span>

<span class="token keyword">local</span> pi <span class="token operator">=</span> <span class="token function">monte_carlo</span><span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Estimate: &quot;</span> <span class="token operator">..</span> pi<span class="token punctuation">)</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">&quot;Error: %.2f%%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token operator">*</span>math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>pi<span class="token operator">-</span>math<span class="token punctuation">.</span>pi<span class="token punctuation">)</span><span class="token operator">/</span>math<span class="token punctuation">.</span>pi<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="racket" data-name="Racket"><pre class="language-"><code class="lang-lisp">#lang racket
<span class="token punctuation">(</span><span class="token car">define</span> <span class="token punctuation">(</span><span class="token car">in_circle</span> x y<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token car">&lt;</span> <span class="token punctuation">(</span><span class="token car">+</span> <span class="token punctuation">(</span><span class="token car">sqr</span> x<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token car">sqr</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span>
 <span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token car">define</span> <span class="token punctuation">(</span><span class="token car">monte_carlo_pi</span> n<span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token car">*</span> <span class="token punctuation">(</span><span class="token car">/</span> <span class="token punctuation">(</span><span class="token car">local</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token car">define</span> <span class="token punctuation">(</span><span class="token car">monte_carlo*</span> n count<span class="token punctuation">)</span>
                  <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token car">=</span> n <span class="token number">0</span><span class="token punctuation">)</span>
                      count
                      <span class="token punctuation">(</span><span class="token car">monte_carlo_pi*</span> <span class="token punctuation">(</span><span class="token car">sub1</span> n<span class="token punctuation">)</span> 
                                    <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token car">in_circle</span> <span class="token punctuation">(</span><span class="token car">random</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token car">random</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
                                        <span class="token punctuation">(</span><span class="token car">add1</span> count<span class="token punctuation">)</span>
                                        count
                                    <span class="token punctuation">)</span>
                      <span class="token punctuation">)</span>
                  <span class="token punctuation">)</span>
               <span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token car">monte_carlo_pi*</span> n <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span> n<span class="token punctuation">)</span> <span class="token number">4</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span>


<span class="token punctuation">(</span><span class="token car">display</span>  <span class="token punctuation">(</span><span class="token car">monte_carlo_pi</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="scala" data-name="Scala"><pre class="language-"><code class="lang-scala"><span class="token keyword">object</span> MonteCarlo <span class="token punctuation">{</span>

  <span class="token keyword">def</span> inCircle<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">Double</span><span class="token punctuation">)</span> <span class="token operator">=</span> x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y <span class="token operator">&lt;</span> <span class="token number">1</span>

  <span class="token keyword">def</span> monteCarloPi<span class="token punctuation">(</span>samples<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">def</span> randCoord <span class="token operator">=</span> math<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">1</span>

    <span class="token keyword">var</span> pointCount <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span>_ <span class="token keyword">&lt;-</span> <span class="token number">0</span> to samples<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>inCircle<span class="token punctuation">(</span>randCoord<span class="token punctuation">,</span> randCoord<span class="token punctuation">)</span><span class="token punctuation">)</span> 
        pointCount <span class="token operator">+=</span> <span class="token number">1</span>

    <span class="token number">4.0</span> <span class="token operator">*</span> pointCount <span class="token operator">/</span> samples
  <span class="token punctuation">}</span>

  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> approxPi <span class="token operator">=</span> monteCarloPi<span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
    println<span class="token punctuation">(</span><span class="token string">&quot;Estimated pi value: &quot;</span> <span class="token operator">+</span> approxPi<span class="token punctuation">)</span>
    println<span class="token punctuation">(</span><span class="token string">&quot;Percent error: &quot;</span> <span class="token operator">+</span> <span class="token number">100</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>abs<span class="token punctuation">(</span>approxPi <span class="token operator">-</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">)</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</div><div class="code-method-sample" data-lang="lisp" data-name="Common Lisp"><pre class="language-"><code class="lang-lisp"><span class="token heading comment title">;;;; Monte carlo integration to approximate pi</span>

<span class="token punctuation">(</span><span class="token defun"><span class="token keyword">defun</span> <span class="token function">in-circle-p</span> <span class="token punctuation">(</span><span class="token arguments"><span class="token argument variable">x</span> <span class="token argument variable">y</span></span><span class="token punctuation">)</span></span>
  <span class="token string">&quot;Checks if a point is in a unit circle&quot;</span>
  <span class="token punctuation">(</span><span class="token car">&lt;</span> <span class="token punctuation">(</span><span class="token car">+</span> <span class="token punctuation">(</span><span class="token car">*</span> x x<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token car">*</span> y y<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token defun"><span class="token keyword">defun</span> <span class="token function">monte-carlo</span> <span class="token punctuation">(</span><span class="token arguments"><span class="token argument variable">samples</span></span><span class="token punctuation">)</span></span>
  <span class="token string">&quot;Returns an approximation of pi&quot;</span>
  <span class="token punctuation">(</span><span class="token car">loop</span> repeat samples
    with count = <span class="token number">0</span> 
    do
      <span class="token punctuation">(</span><span class="token keyword">when</span> <span class="token punctuation">(</span><span class="token car">in-circle-p</span> <span class="token punctuation">(</span><span class="token car">random</span> <span class="token number">1.0</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token car">random</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">(</span><span class="token car">incf</span> count<span class="token punctuation">)</span><span class="token punctuation">)</span>
    finally <span class="token punctuation">(</span><span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token car">*</span> <span class="token punctuation">(</span><span class="token car">/</span> count samples<span class="token punctuation">)</span> <span class="token number">4.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token defvar"><span class="token keyword">defvar</span> <span class="token variable">pi-estimate</span></span> <span class="token punctuation">(</span><span class="token car">monte-carlo</span> <span class="token number">5000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token car">format</span> <span class="token boolean">t</span> <span class="token string">&quot;Estimate: ~<span class="token argument">D</span> ~%&quot;</span> pi-estimate<span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token car">format</span> <span class="token boolean">t</span> <span class="token string">&quot;Error: ~D%&quot;</span> <span class="token punctuation">(</span><span class="token car">*</span> <span class="token punctuation">(</span><span class="token car">/</span> <span class="token punctuation">(</span><span class="token car">abs</span> <span class="token punctuation">(</span><span class="token car">-</span> pi-estimate pi<span class="token punctuation">)</span><span class="token punctuation">)</span> pi<span class="token punctuation">)</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div><div class="code-method-sample" data-lang="asm-x64" data-name="X86-64 Assembly"><pre class="language-"><code class="lang-asm-x64">.intel_syntax noprefix

.section .rodata
  <span class="token label function">pi:</span>            .double <span class="token number">3.141592653589793</span>
  <span class="token label function">one:</span>           .double <span class="token number">1.0</span>
  <span class="token label function">four:</span>          .double <span class="token number">4.0</span>
  <span class="token label function">hundred:</span>       .double <span class="token number">100.0</span>
  <span class="token label function">rand_max:</span>      .long <span class="token number">4290772992</span>
                 .long <span class="token number">1105199103</span>
  <span class="token label function">fabs_const:</span>    .long <span class="token number">4294967295</span>
                 .long <span class="token number">2147483647</span>
                 .long <span class="token number">0</span>
                 .long <span class="token number">0</span>
  <span class="token label function">estimate_fmt:</span>  .string <span class="token string">&quot;The estaimate of pi is %lf\n&quot;</span>
  <span class="token label function">error_fmt:</span>     .string <span class="token string">&quot;Percentage error: %0.2f\n&quot;</span>

.section .text
  .<span class="token keyword">global main</span>
  .<span class="token keyword">extern printf, srand, time, rand</span>

# <span class="token register variable">xmm0</span> <span class="token operator">-</span> x
# <span class="token register variable">xmm1</span> <span class="token operator">-</span> y
# RET <span class="token register variable">rax</span> <span class="token operator">-</span> bool
<span class="token label function">in_circle:</span>
  mulsd  <span class="token register variable">xmm0</span>, <span class="token register variable">xmm0</span>                  # Calculate x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y
  mulsd  <span class="token register variable">xmm1</span>, <span class="token register variable">xmm1</span>
  addsd  <span class="token register variable">xmm0</span>, <span class="token register variable">xmm1</span>
  movsd  <span class="token register variable">xmm1</span>, one                   # Set circle radius to <span class="token number">1</span>
  xor    <span class="token register variable">rax</span>, <span class="token register variable">rax</span>
  comisd <span class="token register variable">xmm1</span>, <span class="token register variable">xmm0</span>                  # Return bool <span class="token register variable">xmm0</span> <span class="token operator">&lt;</span> <span class="token register variable">xmm1</span>
  seta <span class="token register variable">al</span>
  ret

# <span class="token register variable">rdi</span> <span class="token operator">-</span> samples
# RET <span class="token register variable">xmm0</span> <span class="token operator">-</span> estimate
<span class="token label function">monte_carlo:</span>
  pxor   <span class="token register variable">xmm2</span>, <span class="token register variable">xmm2</span>                  # Setting it to zero for loop
  cvtsi2sd <span class="token register variable">xmm3</span>, <span class="token register variable">rdi</span>                 # From int to double
  pxor   <span class="token register variable">xmm4</span>, <span class="token register variable">xmm4</span>                  # Setting to zero for counter
<span class="token label function">monte_carlo_iter:</span>
  comisd <span class="token register variable">xmm2</span>, <span class="token register variable">xmm3</span>                  # Check if we went through all samples
  je     monte_carlo_return
  call   rand                        # Get random point in the first quartile
  cvtsi2sd <span class="token register variable">xmm0</span>, <span class="token register variable">rax</span>
  divsd  <span class="token register variable">xmm0</span>, rand_max
  call   rand
  cvtsi2sd <span class="token register variable">xmm1</span>, <span class="token register variable">rax</span>
  divsd  <span class="token register variable">xmm1</span>, rand_max
  call   in_circle                   # Check if its in the circle
  test   <span class="token register variable">rax</span>, <span class="token register variable">rax</span>
  jz     monte_carlo_false
  addsd  <span class="token register variable">xmm4</span>, one                   # if so increment counter
<span class="token label function">monte_carlo_false:</span>
  addsd  <span class="token register variable">xmm2</span>, one
  jmp    monte_carlo_iter
<span class="token label function">monte_carlo_return:</span>
  mulsd  <span class="token register variable">xmm4</span>, four                  # Return estimate
  divsd  <span class="token register variable">xmm4</span>, <span class="token register variable">xmm2</span>
  movsd  <span class="token register variable">xmm0</span>, <span class="token register variable">xmm4</span>
  ret

<span class="token label function">main:</span>
  push   <span class="token register variable">rbp</span>
  sub    <span class="token register variable">rsp</span>, <span class="token number">16</span>
  mov    <span class="token register variable">rdi</span>, <span class="token number">0</span>
  call   time
  mov    <span class="token register variable">rdi</span>, <span class="token register variable">rax</span>
  call   srand
  mov    <span class="token register variable">rdi</span>, <span class="token number">1000000</span>
  call   monte_carlo
  movsd  QWORD PTR <span class="token operator">[</span><span class="token register variable">rsp</span><span class="token operator">]</span>, <span class="token register variable">xmm0</span>      # Save estimate to stack
  mov    <span class="token register variable">rdi</span>, OFFSET estimate_fmt   # Print estimate
  mov    <span class="token register variable">rax</span>, <span class="token number">1</span>
  call   printf
  movsd  <span class="token register variable">xmm0</span>, QWORD PTR <span class="token operator">[</span><span class="token register variable">rsp</span><span class="token operator">]</span>      # Get estimate from stack
  movsd  <span class="token register variable">xmm1</span>, pi                   # Calculate fabs(M_PI <span class="token operator">-</span> estimate)
  subsd  <span class="token register variable">xmm0</span>, <span class="token register variable">xmm1</span>
  movq   <span class="token register variable">xmm1</span>, fabs_const
  andpd  <span class="token register variable">xmm0</span>, <span class="token register variable">xmm1</span>
  divsd  <span class="token register variable">xmm0</span>, pi                   # Print percentage error on pi
  mulsd  <span class="token register variable">xmm0</span>, hundred
  mov    <span class="token register variable">rdi</span>, OFFSET error_fmt
  mov    <span class="token register variable">rax</span>, <span class="token number">1</span>
  call   printf
  add    <span class="token register variable">rsp</span>, <span class="token number">16</span>
  pop    <span class="token register variable">rbp</span>
  ret
</code></pre>
</div><div class="code-method-sample" data-lang="bash" data-name="Bash"><pre class="language-"><code class="lang-bash"><span class="token shebang important">#!/usr/bin/env bash</span>
<span class="token function-name function">inCircle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> ret
    <span class="token builtin class-name">local</span> mag
    <span class="token variable"><span class="token punctuation">((</span>ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">))</span></span>
    <span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span>$<span class="token number">1</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> $<span class="token number">2</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">&lt;</span> <span class="token number">1073676289</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token comment"># 1073676289 = 32767 ** 2</span>
        <span class="token variable"><span class="token punctuation">((</span>ret <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">))</span></span>
    <span class="token keyword">fi</span>
    <span class="token builtin class-name">printf</span> <span class="token string">&quot;%d&quot;</span> <span class="token variable">$ret</span>
<span class="token punctuation">}</span>

<span class="token function-name function">monteCarlo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> count
    <span class="token builtin class-name">local</span> i
    <span class="token variable"><span class="token punctuation">((</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">))</span></span>
    <span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> $<span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span>
        <span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span>$<span class="token punctuation">(</span>inCircle RANDOM RANDOM<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token variable"><span class="token punctuation">((</span>count<span class="token operator">++</span><span class="token punctuation">))</span></span>
        <span class="token keyword">fi</span>
    <span class="token keyword">done</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;scale = 8; 4 * <span class="token variable">$count</span> / <span class="token variable">$1</span>&quot;</span> <span class="token operator">|</span> <span class="token function">bc</span>
<span class="token punctuation">}</span>

<span class="token assign-left variable">est</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>monteCarlo <span class="token number">10000</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The estimate of pi is <span class="token variable">$est</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Percentage error: <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> &quot;scale <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span> <span class="token number">100</span> * sqrt<span class="token punctuation">(</span> <span class="token punctuation">(</span> <span class="token number">1</span> - $est / <span class="token punctuation">(</span><span class="token number">4</span>*a<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token variable">)</span></span> ) ^ 2 )&quot;</span> <span class="token operator">|</span> <span class="token function">bc</span> -l<span class="token punctuation">)</span>&quot;
</code></pre>
</div><div class="code-method-sample" data-lang="kotlin" data-name="Kotlin"><pre class="language-"><code class="lang-kotlin"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>Random

<span class="token keyword">private</span> <span class="token keyword">fun</span> <span class="token function">inCircle</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Double<span class="token punctuation">,</span> y<span class="token operator">:</span> Double<span class="token punctuation">,</span> radius<span class="token operator">:</span> Double <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">*</span> x <span class="token operator">+</span> y <span class="token operator">*</span> y<span class="token punctuation">)</span> <span class="token operator">&lt;</span> radius <span class="token operator">*</span> radius

<span class="token keyword">fun</span> <span class="token function">monteCarlo</span><span class="token punctuation">(</span>samples<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Double <span class="token punctuation">{</span>
    <span class="token keyword">var</span> piCount <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">val</span> random <span class="token operator">=</span> <span class="token function">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token keyword">in</span> <span class="token number">0</span> until samples<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">val</span> x <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">val</span> y <span class="token operator">=</span> random<span class="token punctuation">.</span><span class="token function">nextDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">inCircle</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>
            piCount<span class="token operator">++</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">4.0</span> <span class="token operator">*</span> piCount <span class="token operator">/</span> samples
<span class="token punctuation">}</span>

<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> piEstimate <span class="token operator">=</span> <span class="token function">monteCarlo</span><span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Estimated pi value: <span class="token interpolation variable">$piEstimate</span>&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> percentError <span class="token operator">=</span> <span class="token number">100</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>piEstimate <span class="token operator">-</span> Math<span class="token punctuation">.</span>PI<span class="token punctuation">)</span> <span class="token operator">/</span> Math<span class="token punctuation">.</span>PI
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Percent error: <span class="token interpolation variable">$percentError</span>&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</div></div></div>

<script>
MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
</script>

<h2 id="license">License</h2>
<h5 id="code-examples">Code Examples</h5>
<p>The code examples are licensed under the MIT license (found in <a href="https://github.com/algorithm-archivists/algorithm-archive/blob/master/LICENSE.md" target="_blank">LICENSE.md</a>).</p>
<h5 id="text">Text</h5>
<p>The text of this chapter was written by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p>
<p><a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank"><p><img class="center" src="../cc/CC-BY-SA_icon.svg"></p></a></p>
<h5 id="imagesgraphics">Images/Graphics</h5>
<ul>
<li>The image &quot;<a href="res/square_circle.png">squarecircle</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licenced under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
<li>The animation &quot;<a href="res/monte_carlo.gif">simplemontecarlo</a>&quot; was created by <a href="https://github.com/leios" target="_blank">James Schloss</a> and is licenced under the <a href="https://creativecommons.org/licenses/by-sa/4.0/legalcode" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</li>
</ul>
<h5 id="pull-requests">Pull Requests</h5>
<p>After initial licensing (<a href="https://github.com/algorithm-archivists/algorithm-archive/pull/560" target="_blank">#560</a>), the following pull requests have modified the text or graphics of this chapter:</p>
<ul>
<li>none</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../euclidean_algorithm/euclidean_algorithm.html" class="navigation navigation-prev " aria-label="Previous page: Euclidean Algorithm">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../matrix_methods/matrix_methods.html" class="navigation navigation-next " aria-label="Next page: Matrix Methods">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Monte Carlo","level":"1.9","depth":1,"next":{"title":"Matrix Methods","level":"1.10","depth":1,"path":"contents/matrix_methods/matrix_methods.md","ref":"contents/matrix_methods/matrix_methods.md","articles":[{"title":"Gaussian Elimination","level":"1.10.1","depth":2,"path":"contents/gaussian_elimination/gaussian_elimination.md","ref":"contents/gaussian_elimination/gaussian_elimination.md","articles":[]},{"title":"Thomas Algorithm","level":"1.10.2","depth":2,"path":"contents/thomas_algorithm/thomas_algorithm.md","ref":"contents/thomas_algorithm/thomas_algorithm.md","articles":[]}]},"previous":{"title":"Euclidean Algorithm","level":"1.8","depth":1,"path":"contents/euclidean_algorithm/euclidean_algorithm.md","ref":"contents/euclidean_algorithm/euclidean_algorithm.md","articles":[]},"dir":"ltr"},"config":{"plugins":["fontsettings","mathjax@https://github.com/algorithm-archivists/plugin-mathjax","bibtex-cite","wordcount","api-language-selector@https://github.com/algorithm-archivists/gitbook-plugin-api-language-selector.git","include-codeblock","ga","bulk-redirect","prism","-highlight"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"api-language-selector":{"languages":[{"lang":"jl","name":"Julia","default":true},{"lang":"bash","name":"Bash"},{"lang":"cs","name":"C#"},{"lang":"cpp","name":"C++"},{"lang":"c","name":"C"},{"lang":"c8","name":"chip-8"},{"lang":"py","name":"Python"},{"lang":"js","name":"JavaScript"},{"lang":"scratch","name":"Scratch"},{"lang":"hs","name":"Haskell"},{"lang":"rs","name":"Rust"},{"lang":"ml","name":"OCaml"},{"lang":"java","name":"Java"},{"lang":"clj","name":"Clojure"},{"lang":"elm","name":"Elm"},{"lang":"LabVIEW","name":"LabVIEW"},{"lang":"d","name":"D"},{"lang":"go","name":"Go"},{"lang":"swift","name":"Swift"},{"lang":"racket","name":"Racket"},{"lang":"m","name":"Matlab"},{"lang":"r","name":"R"},{"lang":"ti83b","name":"TI-83 Basic"},{"lang":"lua","name":"Lua"},{"lang":"crystal","name":"Crystal"},{"lang":"php","name":"PHP"},{"lang":"lisp","name":"Common Lisp"},{"lang":"nim","name":"Nim"},{"lang":"asm-x64","name":"X86-64 Assembly"},{"lang":"f90","name":"Fortran90"},{"lang":"factor","name":"Factor"},{"lang":"ws","name":"Whitespace"},{"lang":"scala","name":"Scala"},{"lang":"emojic","name":"Emojicode"},{"lang":"lolcode","name":"LOLCODE"},{"lang":"piet","name":"Piet"},{"lang":"ss","name":"Scheme"},{"lang":"coffee","name":"CoffeeScript"},{"lang":"kotlin","name":"Kotlin"}]},"prism":{"lang":{"asm-x64":"nasm"},"ignore":["emojicode","text"],"css":["prismjs/themes/prism-tomorrow.css"]},"wordcount":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"family":"sans","size":2,"theme":"white"},"bulk-redirect":{"basepath":"/","redirectsFile":"redirects.json"},"bibtex-cite":{},"mathjax":{"forceSVG":false,"version":"2.6.1"},"ga":{"configuration":"auto","token":"UA-118252470-1"},"include-codeblock":{"check":false,"edit":false,"fixlang":true,"lang":"","template":"default","theme":"chrome","unindent":true},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","lunr":{"maxIndexSize":1000000000},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"bibCount":0,"variables":{},"bib":[{"citationKey":"CT1965","entryType":"ARTICLE","entryTags":{"TITLE":"An algorithm for the machine calculation of complex Fourier series","AUTHOR":"Cooley, James W and Tukey, John W","JOURNAL":"Mathematics of computation","VOLUME":"19","NUMBER":"90","PAGES":"297--301","YEAR":"1965","PUBLISHER":"JSTOR"}},{"citationKey":"JM1973","entryType":"ARTICLE","entryTags":{"TITLE":"On the identification of the convex hull of a finite set of points in the plane","AUTHOR":"Jarvis, Ray A","JOURNAL":"Information processing letters","VOLUME":"2","NUMBER":"1","PAGES":"18--21","YEAR":"1973","PUBLISHER":"Elsevier"}},{"citationKey":"GS1972","entryType":"ARTICLE","entryTags":{"TITLE":"An efficient algorithm for determining the convex hull of a finite planar set","AUTHOR":"Graham, Ronald L","JOURNAL":"Information processing letters","VOLUME":"1","NUMBER":"4","PAGES":"132--133","YEAR":"1972","PUBLISHER":"Elsevier"}}],"gitbook":"3.x.x"},"file":{"path":"contents/monte_carlo_integration/monte_carlo_integration.md","mtime":"2019-10-25T00:46:16.429Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-10-25T00:47:35.317Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-mathjax/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-api-language-selector/api-language-selector.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    

    </body>
</html>

